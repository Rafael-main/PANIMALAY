{% extends 'layout/master_layout.html' %}

{% block head %}
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/redirect.css') }}">
{% endblock %}

{% block content%}
<div class="container">
    <div class="row">
      <div class="col-md-6">
        <div class="container">
          <h3 class="mt-5">Kalasan Iligan City, Lanao del Norte</h3>
          <div class="d-flex">
            <div class="dropdown">
              <button class="btn btn-light btn-filters mt-3 btn-sm" type="button" id="priceSearch" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Price
              </button>
              <div class="dropdown-menu" aria-labelledby="priceSearch" style="width: 300px;">
                <form action="/_prices" id="price-range" class="px-4 py-3">
                  <div>
                    <div class="form-row">
                      <div class="form-group col">
                        <label for="min-price" class="price">min price</label>
                        <input class="form-control" id="min-price" type="number">
                      </div>
                      <div class="float-left">-</div>
                      <div class="form-group col">
                        <label class="price" for="max-price">max price</label>
                        <input class="form-control" id="max-price" type="number">
                      </div>
                    </div>  
                  </div>
                  <div class="dropdown-divider"></div>
                  <div class="float-left mr-auto">
                    <button type="submit" class="btn btn-secondary btn-sm">Save</button>
                  </div>
                </form>
              </div>
            </div>
  
            <!-- Button trigger modal -->
            <button type="button" class="mt-3 ml-2 btn btn-filters btn-sm btn-light" data-toggle="modal" data-target="#searchMore">
              More Filters
            </button>
  
            <!-- Modal -->
            <div class="modal fade" id="searchMore" tabindex="-1" aria-labelledby="searchModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <form id="search-more" action="/search_more">
                    <div class="modal-header">
                      <h5 class="modal-title" id="searchModalLabel">Search More</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <div class="container">
                        <div class="row">
                          <div class="col">
                            <div class="container">
                              <div class="row">
                                <div class="col">
                                  <div class="row">
                                    <span><h6>Amenities</h6></span>
                                  </div>
                                  <div class="row">
                                    <div class="col-6">
                                      <div class="form-check">
                                        <input class="form-check-input" name="amenities" type="checkbox" value="shampoo" id="shampoo">
                                        <label class="form-check-label" for="shampoo">
                                          shampoo
                                        </label>
                                      </div>
                                    </div>
                                    <div class="col-6">
                                      <div class="form-check">
                                        <input class="form-check-input" name="amenities" type="checkbox" value="wifi" id="wifi">
                                        <label class="form-check-label" for="wifi">
                                          wifi
                                        </label>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <hr/>
                              <div class="row">
                                <div class="col">
                                  <div class="row">
                                    <span><h6>Facilities</h6></span>
                                  </div>
                                  <div class="row">
                                    <div class="col-6">
                                      <div class="form-check">
                                        <input class="form-check-input" name="facilities" type="checkbox" value="gym" id="gym">
                                        <label class="form-check-label" for="gym">
                                          Gym
                                        </label>
                                      </div>
                                    </div>
                                    <div class="col-6">
                                      <div class="form-check">
                                        <input class="form-check-input" name="facilities" type="checkbox" value="pool" id="pool">
                                        <label class="form-check-label" for="pool">
                                          Pool
                                        </label>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <hr/>
                              <div class="row">
                                <div class="col">
                                  <div class="row">
                                    <span><h6>Property Type</h6></span>
                                  </div>
                                  <div class="row">
                                    <div class="col-6">
                                      <div class="form-check">
                                        <input class="form-check-input" name="PropType" type="checkbox" value="apartments" id="apartments">
                                        <label class="form-check-label" for="apartments">
                                          Apartments
                                        </label>
                                      </div>
                                    </div>
                                    <div class="col-6">
                                      <div class="form-check">
                                        <input class="form-check-input" name="PropType" type="checkbox" value="" id="bhouse">
                                        <label class="form-check-label" for="bhouse">
                                          Boarding House
                                        </label>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-sm btn-light mr-auto" data-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-sm btn-secondary">Save</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <div class="container-fluid">
            <div class=" row flex-row">
              {% for i in data %}
                <div class="col-md-6 col-xl-6 col-sm-12 my-3">
                  <div class="card">
                    <a class="card-block stretched-link text-decoration-none" href="{{ url_for('selected', id=i['user_id']) }}">
                      <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                          {% for j in i['unitImages'] %}
                            <li data-target="#carouselExampleIndicators" data-slide-to="{{ loop.index }}" class="{% if loop.index == 1 %} active {% endif %}"></li>
                          {% endfor %}
                        </ol>
                        <div class="carousel-inner">
                          {% for j in i['unitImages'] %}
                          <div class="carousel-item {% if loop.index == 1 %} active{% endif %}">
                            <img src="{{j['image']}}" class="d-block w-100" alt="{{j['name']}}">
                          </div>
                          {% endfor %}
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                          <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                          <span class="carousel-control-next-icon" aria-hidden="true"></span>
                          <span class="sr-only">Next</span>
                        </a>
                      </div>
                      <div class="card-body">
                        <span class="mb-1"><i class="far fa-star"></i> 1.3</span>
                        <p class="card-text">{{i['location']['barangay']}} {{ i['location']['city/municipality' ] }}  {{i['location']['country']}} {{ i['location']['postal_code'] }}</p>
                        <span><h6 class="card-text">{{ i['price-of-unit'] }}</h6></span>
                        <hr/>
                        <div class="d-inline-flex">
                          <p><i class="fas fa-bed fa-lg"></i> {{ i['capacity'][1]['maximum'] }}</p>
                          <p class="ml-3"><i class="fas fa-bath fa-lg"></i> {{ i['capacity'][0]['maximum'] }}</p>
                        </div>
                      </div>
                    </a>
                  </div>
                </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="sticky-top">
          <div id='mapid' class="mapid"></div>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript" src="{{ url_for('static', filename='js/leaflet.js') }}"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='js/redirect.js') }}"></script>
{% endblock %}